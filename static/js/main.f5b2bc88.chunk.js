(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/character.054c9f72.svg"},36:function(e,t,a){e.exports=a(52)},41:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),i=(a(41),a(7)),c=a(8),l=a(11),u=a(9),m=a(10),p=a(17),v=a(2),h=a(4),d=Object(v.b)(function(e){return{user:e.user}})(function(e){var t,a,n=e.user.name;return n?(t="fas signin-icon fa-user-minus",a="/signout"):(t="fas signin-icon fa-user-plus",a="/login"),r.a.createElement("nav",{className:"NavBar"},r.a.createElement("article",{className:"user--content"},r.a.createElement(h.b,{to:a,onClick:e.handleClick,className:"NavBar-Signout"},r.a.createElement("i",{className:t}),!n&&r.a.createElement("h4",null,"Please Signin"),n&&r.a.createElement("h4",null,"Hi, ",n))),r.a.createElement("section",{className:"NavButton--container"},r.a.createElement(h.b,{exact:!0,to:"/",className:"NavBar-links"},"In Theaters"),r.a.createElement(h.b,{to:"/favorites",className:"NavBar-links"},"Favorites"),r.a.createElement("button",{onClick:function(){return window.alert("Feature Coming Soon")}},"Latest Movies"),r.a.createElement("button",{onClick:function(){return window.alert("Feature Coming Soon")}},"History"),r.a.createElement("button",{onClick:function(){return window.alert("Feature Coming Soon")}},"Watch List")))}),f=a(3),E=a.n(f),g=a(15),b=function(e){return{type:"SET_ERROR_MESSAGE",errorMessage:e}},O=function(e){return{type:"TOGGLE_FAVORITE",id:e}},w=function(e,t){var a="http://localhost:3000/api/users/".concat(e,"/favorites/").concat(t);return fetch(a,{method:"DELETE"}).then(function(e){if(!e.ok)throw Error("Error in deleting favorite")})},N=function(e,t){return fetch(e,t).then(function(e){if(e.ok)return e.json();throw Error(e)})},y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFavorite=function(e){e.preventDefault(),console.log(a.props.movie),a.props.movie.isFavorite?(console.log("remove"),a.removeFavorite()):(console.log("add"),a.addFavorite())},a.removeFavorite=Object(g.a)(E.a.mark(function e(){var t,n,r,o,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.user,r=t.toggleFavorite,o=t.setErrorMessage,s=a.props.movie.id;try{w(n.id,s),r(s)}catch(i){o("Error in deleting favorite")}case 3:case"end":return e.stop()}},e)})),a.addFavorite=Object(g.a)(E.a.mark(function e(){var t,n,r,o,s,i,c,l,u,m,p,v;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.user,r=t.toggleFavorite,o=t.setErrorMessage,s=a.props.movie,i=s.title,c=s.id,l=s.summary,u=s.poster,m=s.release,p=s.rating,"http://localhost:3000/api/users/favorites/new",v={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i,user_id:n.id,movie_id:c,overview:l,poster_path:u,release_date:m,vote_average:p})},e.prev=4,e.next=7,N("http://localhost:3000/api/users/favorites/new",v);case 7:e.sent,r(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),o("Please sign in to favorite"),window.alert(a.props.errorMessage);case 15:case"end":return e.stop()}},e,null,[[4,11]])})),a.state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.movie,t=e.title,a=e.backdrop,n=e.summary,o=e.genres,s=e.rating,i=e.release,c=e.isFavorite,l="".concat(c);return this.props.movie==={}?r.a.createElement(p.a,{to:"/"}):r.a.createElement("main",null,r.a.createElement("section",{className:"BigCard"},a&&r.a.createElement("img",{className:"backdrop",src:a,alt:"Backdrop Unavailable"}),r.a.createElement("article",{className:"big-content"},t&&r.a.createElement("h2",null,t),i&&r.a.createElement("h4",null,i),r.a.createElement("div",{className:"big-subcontent"},n&&r.a.createElement("p",null,n),o&&r.a.createElement("p",null,o)),s&&r.a.createElement("h3",null,"Avg Score: ",s)),r.a.createElement("button",{className:"faveBtn",onClick:this.handleFavorite},r.a.createElement("i",{className:"fas fa-star fave-".concat(l)})),r.a.createElement(h.b,{to:"/",className:"close"},r.a.createElement("i",{className:"fas fa-times-circle"}))))}}]),t}(n.Component),j=Object(v.b)(function(e){return{movie:e.currMovie,user:e.user}},function(e){return{setErrorMessage:function(t){return e(b(t))},toggleFavorite:function(t){return e(O(t))}}})(y),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this))).handleFavorite=function(e){e.preventDefault(),console.log(a.props.movie),a.props.movie.isFavorite?a.removeFavorite():a.addFavorite()},a.removeFavorite=Object(g.a)(E.a.mark(function e(){var t,n,r,o,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.user,r=t.toggleFavorite,o=t.setErrorMessage,s=a.props.movie.id;try{w(n.id,s),r(s)}catch(i){o("Error in deleting favorite")}case 3:case"end":return e.stop()}},e)})),a.addFavorite=Object(g.a)(E.a.mark(function e(){var t,n,r,o,s,i,c,l,u,m,p,v;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.user,r=t.toggleFavorite,o=t.setErrorMessage,s=a.props.movie,i=s.title,c=s.id,l=s.summary,u=s.poster,m=s.release,p=s.rating,"http://localhost:3000/api/users/favorites/new",v={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i,user_id:n.id,movie_id:c,overview:l,poster_path:u,release_date:m,vote_average:p})},e.prev=4,e.next=7,N("http://localhost:3000/api/users/favorites/new",v);case 7:e.sent,r(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),o("Please sign in to favorite"),window.alert(a.props.errorMessage);case 15:case"end":return e.stop()}},e,null,[[4,11]])})),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.movie,a=this.props.movie,n=a.title,o=a.id,s=a.summary,i=a.poster,c=a.rating,l=a.isFavorite,u="".concat(l);return r.a.createElement(h.b,{className:"small-link",to:"/movie/".concat(o)},r.a.createElement("article",{className:"SmallCard",onClick:function(){return e.props.grabCurrMovie(t)}},r.a.createElement("div",{className:"image--container"},i&&r.a.createElement("img",{src:i,alt:n})),r.a.createElement("div",{className:"content"},n&&r.a.createElement("h3",null,n),s&&r.a.createElement("span",{className:"sub-content"},r.a.createElement("div",{className:"sub-border"}),r.a.createElement("p",null,s.slice(0,50)),r.a.createElement("p",{className:"showmore"},"... (Show More)"))),r.a.createElement("div",{className:"rating"},c&&r.a.createElement("h4",null,c)),r.a.createElement("button",{className:"faveBtn",onClick:this.handleFavorite},r.a.createElement("i",{className:"fas fa-star fave-".concat(u)})),r.a.createElement(p.b,{path:"/movie/",render:function(t){t.match;return r.a.createElement(j,{movie:e.props.movie})}})))}}]),t}(n.Component),F=Object(v.b)(function(e){return{movies:e.movies,user:e.user,errorMessage:e.errorMessage}},function(e){return{toggleFavorite:function(t){return e(O(t))},setErrorMessage:function(t){return e(b(t))},grabCurrMovie:function(t){return e(function(e){return{type:"GRAB_MOVIE",movie:e}}(t))}}})(S),k=a(23),C=a.n(k),_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return e=this.props.movies.length?this.props.movies.map(function(e){return r.a.createElement(F,{movie:e,key:e.id})}):null,r.a.createElement("main",{className:"CardContainer"},r.a.createElement("header",null,r.a.createElement("div",{className:"title"},r.a.createElement("img",{src:C.a,alt:"butterflix-fairy-mascot"}),r.a.createElement("h1",null,"ButterFlix"))),r.a.createElement("div",{className:"display-divider"}),r.a.createElement("section",{className:"cards-display"},e))}}]),t}(n.Component),M=Object(v.b)(function(e){return{movies:e.movies}})(_),x=Object(v.b)(function(e){return{movies:e.movies,user:e.user}})(function(e){var t=e.movies.filter(function(e){return e.isFavorite}).map(function(e){return r.a.createElement(F,{movie:e,key:e.id})});return r.a.createElement("main",{className:"CardContainer"},r.a.createElement("header",null,r.a.createElement("div",{className:"title"},r.a.createElement("img",{src:C.a,alt:"butterflix-fairy-mascot"}),r.a.createElement("h1",null,"ButterFlix")),r.a.createElement("div",{className:"search-icon"},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("div",{className:"display-divider"}),r.a.createElement("section",{className:"cards-display"},t))}),L=a(24),T=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(L.a)({},n,r))},e.fetchFavorites=function(){var t=Object(g.a)(E.a.mark(function t(a){var n,r,o;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="http://localhost:3000/api/users/".concat(a,"/favorites"),t.prev=1,t.next=4,N(n,null);case 4:return r=t.sent,t.next=7,r.data;case 7:o=t.sent,e.props.setFavorites(o),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.props.setErrorMessage("Error in fetching user favorites");case 14:case"end":return t.stop()}},t,null,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),e.handleLogin=function(t){t.preventDefault();var a=e.createInit(e.state);N("http://localhost:3000/api/users",a).then(function(t){e.setState({successfulLogin:!0}),e.props.loginUser(t.data),e.fetchFavorites(t.data.id)}).catch(function(t){e.props.setErrorMessage("Incorrect email/password combination"),window.alert("Incorrect email/password combination")})},e.handleSignup=function(){var t=Object(g.a)(E.a.mark(function t(a){var n,r,o;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.props.isLoading(!0),"http://localhost:3000/api/users/new",n=e.createInit(e.state),t.prev=4,t.next=7,N("http://localhost:3000/api/users/new",n);case 7:r=t.sent,o={id:r.id,name:e.state.name,email:e.state.email,password:e.state.password},e.props.loginUser(o),e.setState({successfulLogin:!0}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),e.props.setErrorMessage("Email already used for an account"),window.alert("Email already used for an account");case 17:e.props.isLoading(!1);case 18:case"end":return t.stop()}},t,null,[[4,13]])}));return function(e){return t.apply(this,arguments)}}(),e.state={name:"",email:"",password:"",successfulLogin:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"createInit",value:function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}}},{key:"render",value:function(){return this.state.successfulLogin?r.a.createElement(p.a,{to:"/"}):r.a.createElement("section",{className:"UserForm"},r.a.createElement("form",{className:"existingUser",onSubmit:this.handleLogin},r.a.createElement("h2",null,"Existing User"),r.a.createElement("span",{className:"EU-input"},r.a.createElement("input",{name:"email",onChange:this.handleChange,type:"email",placeholder:"Email@email.com"}),r.a.createElement("input",{name:"password",onChange:this.handleChange,type:"password",placeholder:"Password"})),r.a.createElement("input",{className:"user-submit",type:"submit",value:"Login"})),r.a.createElement("div",{className:"divider"}),r.a.createElement("form",{className:"newUser",onSubmit:this.handleSignup},r.a.createElement("h2",null,"New User: Create Account"),r.a.createElement("span",{className:"EU-input"},r.a.createElement("input",{name:"name",maxLength:"10",onChange:this.handleChange,type:"text",placeholder:"Name"}),r.a.createElement("input",{name:"email",onChange:this.handleChange,type:"email",placeholder:"Email@email.com"}),r.a.createElement("input",{name:"password",onChange:this.handleChange,type:"password",placeholder:"Password"})),r.a.createElement("input",{className:"user-submit",type:"submit",value:"Sign-Up"})))}}]),t}(n.Component),I=Object(v.b)(null,function(e){return{loginUser:function(t){return e(function(e){return{type:"LOGIN_USER",user:e}}(t))},isLoading:function(t){return e({type:"IS_LOADING",isLoading:t})},setErrorMessage:function(t){return e(b(t))},setFavorites:function(t){return e(function(e){return{type:"SET_FAVORITES",favorites:e}}(t))}}})(T),U=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.setState({loggedOut:!0}),e.props.signoutUser()},e.state={loggedOut:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.loggedOut?r.a.createElement(p.a,{to:"/"}):r.a.createElement("section",{className:"Signout"},r.a.createElement("form",{className:"Signout-form",onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Leaving so soon?"),r.a.createElement("div",{className:"Signout-divider"}),r.a.createElement("span",{className:"h-group"},r.a.createElement("h4",null,"Click the button below,"),r.a.createElement("h4",null,"To signout of ButterFlix")),r.a.createElement("input",{className:"user-submit",type:"submit",value:"Signout"})))}}]),t}(n.Component),B=Object(v.b)(null,function(e){return{signoutUser:function(){return e({type:"SIGNOUT_USER"})}}})(U),R=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("https://api.themoviedb.org/3/movie/","now_playing").concat("?api_key=6786193f3a2bb7eaf23822b287e4fa84")).then(function(e){if(e.ok)return e.json();throw Error("Error in fetching films")}).then(function(e){return e.results}).then(function(e){return function(e){return e.map(function(e){return{title:e.title,poster:"https://image.tmdb.org/t/p/w500/".concat(e.poster_path),backdrop:"https://image.tmdb.org/t/p/w500/".concat(e.backdrop_path),summary:e.overview,rating:e.vote_average,genres:e.genres,release:e.release_date,id:e.id,isFavorite:!1}})}(e)}).then(function(t){return e.props.addMovies(t)}).catch(function(e){return console.log("Error in fetching movies from DB")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(p.b,{exact:!0,path:"/",component:M}),r.a.createElement(p.b,{path:"/movie/",component:j}),r.a.createElement(p.b,{exact:!0,path:"/login",component:I}),r.a.createElement(p.b,{exact:!0,path:"/signout",component:B}),r.a.createElement(p.b,{exact:!0,path:"/favorites",component:x}))}}]),t}(n.Component),G=Object(v.b)(null,function(e){return{addMovies:function(t){return e(function(e){return{type:"FETCH_MOVIES",movies:e}}(t))}}})(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(16),D=a(33),P=a(28),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES":return t.movies;case"TOGGLE_FAVORITE":return Object(P.a)(e).map(function(e){return e.id===t.id&&(e.isFavorite=!e.isFavorite),e});case"SET_FAVORITES":return Object(P.a)(e).map(function(e){return t.favorites.forEach(function(t){t.movie_id===e.id&&(e.isFavorite=!e.isFavorite)}),e});default:return e}},J=a(34),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GRAB_MOVIE":return Object(J.a)({},t.movie);default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING":return t.isLoading;default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR_MESSAGE":return t.errorMessage;default:return e}},q=Object(A.combineReducers)({movies:V,currMovie:H,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return t.user;case"SIGNOUT_USER":return{};default:return e}},isLoading:W,errorMessage:$}),z=a(35),K=Object(A.createStore)(q,Object(D.composeWithDevTools)(Object(A.applyMiddleware)(z.a))),Q=r.a.createElement(h.a,null,r.a.createElement(G,null));s.a.render(r.a.createElement(v.a,{store:K},Q),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.f5b2bc88.chunk.js.map